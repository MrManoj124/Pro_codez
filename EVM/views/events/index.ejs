<!-- //views/events/index.ejs -->
<%- include('../partials/header') %>

<div class="container">
  <h2 class="mt-4">Event List</h2>

  <% if (success_msg) { %>
    <div class="alert alert-success"><%= success_msg %></div>
  <% } %>
  <% if (error_msg) { %>
    <div class="alert alert-danger"><%= error_msg %></div>
  <% } %>

  <a href="new" class="btn btn-primary mb-3">Create New Event</a>

  <% if (events.length > 0) { %>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Organizer</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% events.forEach(event => { %>
          <tr>
            <td><%= event.title %></td>
            <td><%= new Date(event.date).toLocaleDateString() %></td>
            <td><%= event.organizer %></td>
            <td>
              <a href="/events/<%= event._id %>/edit" class="btn btn-warning btn-sm">Edit</a>
              <form action="/events/<%= event._id %>?_method=DELETE" method="POST" style="display:inline;">
                <button class="btn btn-danger btn-sm" onclick="return confirm('Are you sure?')">Delete</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } else { %>
    <p>No events found.</p>
  <% } %>
  <center>
  <!--
  <button style="text-align: center; margin-top: 20px;text-decoration: none; background-color: #7836f4; color: white; padding: 10px 20px; border: none; border-radius: 5px;">
    <a href="/logout">Logout</a>
  </button> -->
  <a href="/logout" class="logout-button">Logout</a>

</center>
</div>


<%- include('../partials/footer') %>
